<th:block th:replace="~{layout/main-layout :: main_layout(~{::#profile-content})}">
    <div id="profile-content" class="max-w-6xl mx-auto px-4 py-8">

        <div class="flex items-center gap-3 mb-10">
            <div class="w-2 h-10 bg-indigo-600 rounded-full"></div>
            <div>
                <h2 class="text-3xl font-black text-slate-800 tracking-tight uppercase">Cấu hình định danh</h2>
                <p class="text-slate-400 text-[10px] font-black uppercase tracking-[0.3em]">Sentinel ID Profile v4.0 • Encryption Active</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">

            <div class="lg:col-span-1 space-y-6">
                <div class="card bg-white shadow-[0_20px_50px_rgba(0,0,0,0.04)] border border-slate-100 p-8 text-center rounded-3xl relative overflow-hidden">
                    <div class="absolute inset-0 opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(circle at 2px 2px, rgba(0,0,0,0.2) 1px, transparent 0); background-size: 12px 12px;"></div>

                    <div class="relative z-10">
                        <div class="avatar online mb-6">
                            <div class="w-28 rounded-2xl border-4 border-indigo-50 p-1 bg-white shadow-xl">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Vương" class="rounded-xl bg-slate-50" />
                            </div>
                        </div>
                        <h3 class="text-xl font-black text-slate-800 tracking-tight" th:text="${user.fullName}">Vương Developer</h3>
                        <p class="text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-6" th:text="'@' + ${user.username}">@vuong_developer</p>

                        <div th:if="${user.kycVerified}" class="inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-600 rounded-xl border border-emerald-100 shadow-sm shadow-emerald-100/50">
                            <i class="fa-solid fa-user-check text-xs"></i>
                            <span class="text-[10px] font-black uppercase tracking-widest">KYC Verified</span>
                        </div>
                    </div>
                </div>

                <div class="card bg-white shadow-sm border border-slate-100 p-3 rounded-2xl">
                    <nav id="profile-nav" class="flex flex-col gap-1.5">
                        <a href="#general" id="nav-general"
                           class="nav-item group flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 font-black text-[10px] uppercase tracking-widest bg-indigo-600 text-white shadow-lg shadow-indigo-100">
                            <i class="fa-solid fa-id-card text-sm"></i>
                            Thông tin chung
                        </a>
                        <a href="#security" id="nav-security"
                           class="nav-item group flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 font-black text-[10px] uppercase tracking-widest text-slate-400 hover:bg-slate-50 hover:text-indigo-600">
                            <i class="fa-solid fa-shield-halved text-sm opacity-50 group-hover:opacity-100"></i>
                            Bảo mật & Quyền
                        </a>
                        <a href="#notifications" id="nav-notifications"
                           class="nav-item group flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 font-black text-[10px] uppercase tracking-widest text-slate-400 hover:bg-slate-50 hover:text-indigo-600">
                            <i class="fa-solid fa-bell text-sm opacity-50 group-hover:opacity-100"></i>
                            Cấu hình thông báo
                        </a>
                    </nav>
                </div>
            </div>

            <div class="lg:col-span-3 space-y-8">

                <section id="general" class="card bg-white shadow-[0_20px_50px_rgba(0,0,0,0.04)] border border-slate-100 rounded-3xl overflow-hidden">
                    <div class="p-8 border-b border-slate-50 bg-slate-50/30">
                        <h4 class="text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]">Cấu hình thực thể (General Info)</h4>
                    </div>
                    <div class="card-body p-8 md:p-10">
                        <form class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-control w-full">
                                    <label class="label"><span class="text-[10px] font-black uppercase tracking-widest text-slate-400">Họ và tên đầy đủ</span></label>
                                    <input type="text" th:value="${user.fullName}" class="input input-bordered w-full h-12 bg-slate-50 border-slate-200 focus:border-indigo-500 font-bold text-slate-700" />
                                </div>
                                <div class="form-control w-full">
                                    <label class="label"><span class="text-[10px] font-black uppercase tracking-widest text-slate-400">Định danh liên lạc (Phone)</span></label>
                                    <input type="text" th:value="${user.phoneNumber}" class="input input-bordered w-full h-12 bg-slate-50 border-slate-200 font-bold text-slate-700" />
                                </div>
                            </div>
                            <div class="form-control w-full">
                                <label class="label"><span class="text-[10px] font-black uppercase tracking-widest text-slate-400">Địa chỉ Email xác thực</span></label>
                                <input type="email" th:value="${user.email}" class="input input-bordered w-full h-12 bg-slate-50 border-slate-200 font-bold text-slate-700" />
                            </div>
                            <div class="pt-4">
                                <button class="btn btn-primary bg-indigo-600 border-none px-10 h-12 font-black uppercase tracking-widest text-[10px] shadow-lg shadow-indigo-100">Cập nhật thông tin</button>
                            </div>
                        </form>
                    </div>
                </section>

                <section id="security" class="card bg-white shadow-[0_20px_50_rgba(0,0,0,0.04)] border border-slate-100 rounded-3xl overflow-hidden">
                    <div class="p-8 border-b border-slate-50 bg-slate-50/30">
                        <h4 class="text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]">Lớp bảo vệ Sentinel Guard</h4>
                    </div>
                    <div class="card-body p-8 md:p-10 space-y-8">
                        <div class="flex justify-between items-center group">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-slate-50 flex items-center justify-center text-slate-400 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-colors">
                                    <i class="fa-solid fa-lock-open text-lg"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-black text-slate-800 uppercase tracking-tight">Cấu hình mật khẩu</p>
                                    <p class="text-[10px] font-medium text-slate-400 italic">Lần cập nhật cuối: 30 ngày trước</p>
                                </div>
                            </div>
                            <a th:href="@{/profile/security/change-password}" class="btn btn-outline border-slate-200 btn-sm px-6 font-black uppercase tracking-widest text-[10px] hover:bg-indigo-600 hover:border-indigo-600 transition-all">Thay đổi</a>
                        </div>

                        <div class="flex justify-between items-center group">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600">
                                    <i class="fa-solid fa-shield-check text-lg"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-black text-slate-800 uppercase tracking-tight">Xác thực đa yếu tố (2FA)</p>
                                    <p class="text-[10px] font-black text-emerald-600 uppercase tracking-widest mt-0.5">Trạng thái: Active Security</p>
                                </div>
                            </div>
                            <a th:href="@{/security/setup-2fa}" class="text-[10px] font-black text-indigo-600 uppercase tracking-widest hover:underline">Quản lý 2FA</a>
                        </div>
                    </div>
                </section>

                <section id="notifications" class="card bg-white shadow-[0_20px_50px_rgba(0,0,0,0.04)] border border-slate-100 rounded-3xl overflow-hidden">
                    <div class="p-8 border-b border-slate-50 bg-slate-50/30">
                        <h4 class="text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]">Thiết lập phản hồi thời gian thực</h4>
                    </div>
                    <div class="card-body p-8 md:p-10 space-y-6">
                        <div class="form-control">
                            <label class="label cursor-pointer justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100 hover:bg-white transition-colors">
                                <div class="flex items-center gap-4">
                                    <i class="fa-solid fa-envelope-open-text text-slate-400"></i>
                                    <span class="text-xs font-bold text-slate-700">Thông báo biến động số dư qua Email</span>
                                </div>
                                <input type="checkbox" class="toggle toggle-primary" checked />
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100 hover:bg-white transition-colors">
                                <div class="flex items-center gap-4">
                                    <i class="fa-solid fa-user-ninja text-slate-400"></i>
                                    <span class="text-xs font-bold text-slate-700">Cảnh báo truy cập từ thiết bị lạ</span>
                                </div>
                                <input type="checkbox" class="toggle toggle-primary" checked />
                            </label>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</th:block>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const navItems = document.querySelectorAll('.nav-item');

        navItems.forEach(item => {
            item.addEventListener('click', function() {
                navItems.forEach(nav => {
                    nav.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg', 'shadow-indigo-100');
                    nav.classList.add('text-slate-400', 'hover:bg-slate-50', 'hover:text-indigo-600');
                    const icon = nav.querySelector('i');
                    if(icon) icon.classList.add('opacity-50');
                });

                this.classList.add('bg-indigo-600', 'text-white', 'shadow-lg', 'shadow-indigo-100');
                this.classList.remove('text-slate-400', 'hover:bg-slate-50', 'hover:text-indigo-600');
                const activeIcon = this.querySelector('i');
                if(activeIcon) activeIcon.classList.remove('opacity-50');
            });
        });
    });
</script>